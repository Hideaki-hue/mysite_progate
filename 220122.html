<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
    <div class="container">
        <h1 class="mx-1 my-3">計算アプリ</h1>
        <input class="m-2 col-8" id="num" type="number" placeholder="1から入力した数値までの総和を計算します">
        <input id="btn" type="button" value="OK">
        <h2 class="m-2" id="answer"></p>
        <p class="col-8" id="li"></p>
        <script>
            let btn = document.getElementById("btn");
            //OKボタンをクリックしたとき呼び出される関数
            btn.onclick = function () {
                let num = document.getElementById("num").value;
                //iは総和、jは足していく数値
                let i = 1;
                let j = 1;
                let txt_0 = "1";
                let txt_1 ="";
                //入力された回数繰り返す
                while (j < Number(num)) {
                    j ++;
                    i += j;
                    //足す数値が増えると画面をはみ出すので、「・・・」を使って式を表す
                    if (j < 14) {
                        txt_0 = txt_0 + "+" + String(j)
                    } else {
                        txt_0 = "1+2+3+4+5+・・・";
                        let txt_3 = "";
                        for (k = -5; k <= 0; k++) {//桁が増えるとずれてくるので調整
                            let txt_2 = "+" + String(j + k)
                            txt_3 += txt_2
                        } 
                        txt_0 += txt_3
                    }
                    txt_1 = "\n= " + String(i)
                    let div = document.getElementsByTagName("div")[0];
                    let ans = document.createElement("p");
                    ans.setAttribute("class", "m-2")
                    div.appendChild(ans)
                    let ans_text_node = document.createTextNode(txt_0 + txt_1)
                    ans.appendChild(ans_text_node)
                }
                let f_ans = document.getElementById("answer")
                if (num != "") {
                    f_ans.innerHTML = txt_0 + txt_1
                //数値が入力されていないときの処理
                } else {
                    f_ans.innerHTML = "数値を入力してください。"
                }
            }
        </script>
    </div>
</body>
</html>